# 그림으로 공부하는 IT 인프라 구조

## 1. 인프라 아키텍쳐를 살펴보자

- 인프라란 무엇일까?
- 집약형과 분할형 아키텍쳐
- 수직 분할형 아키텍쳐
- 수평 분할형 아키텍쳐
- 지리 분할형 아키텍쳐

### 인프라란 무엇일까?

- IT 인프라 = 네트워크, DB, 서버, 시스템 소프트웨어 및 기반시설 등 IT 서비스의 기반이 되는 시스템 및 구조를 통칭

- 완벽한 인프라 아키텍쳐는 없으며 모든 인프라 아키텍쳐 및 설계 요소에는 장단점이 동시에 존재

- 현재 위치한 환경과 상황, 예산에 따라 가장 적합하고 단점을 최소화할 수 있는 인프라를 취사선택할 것

- 시스템의 가장 중요한 장점은 살리고 단점은 최소화할 수 있도록 설계하는 것이 핵심

#### 집약형과 분할형 아키텍쳐

**집약형 아키텍쳐**

- 대형 컴퓨터 하나로 모든 업무를 처리하므로 **'집약형'**
- 대형 컴퓨터 = "범용 장비, "호스트", "메인 프레임" 등으로 불림
- 주로 '기간 시스템'이라 불리는 기업 내 핵심 업무 시스템에서 이용하는 경우가 많음
- 복수의 서로 다른 업무 처리를 동시 실행할 수 있도록 유한 리소스 관리 (이중화)
- 하나의 집에 여러 사람이 동거하고 있는 형태와 유사

  - 장점
    - 간단한 구성
    - 대형 컴퓨터의 리소스 관리나 이중화에 의한 높은 성능과 안정성
  - 단점
    - 높은 유지보수 비용
    - 확장성에 한계

---

**분할형 아키텍쳐**

- 여러대의 컴퓨터를 조합해서 하나의 시스템을 구축하므로 **'분할형'**
- "오픈 시스템", "분산 시스템" 등으로 불림
- 대형 컴퓨터에 비해 압도적으로 저렴한 가격이나 안정성이 떨어짐
- 안정성을 보완하기 위해 여러 대의 컴퓨터 이용
- 표준 OS나 개발 언어를 사용하는 **'오픈 시스템'**

  - 장점

    - 낮은 유지보수 비용
    - 서버 대수를 확충할 수 있어 확장성에 용이

  - 단점
    - 대수가 늘어날수록 관리 구조가 복잡
    - 한 대가 망가지면 영향 범위를 최소화하기 위한 서버별 구조 검토 필요

#### 물리 서버와 논리 서버의 차이

- 분할형 아키텍처에서 이용되는 컴퓨터 = **Server**
- 서버는 HW를 가리키기도, 컴퓨터에서 동작하는 SW를 가리키기도 함
- 본래 '특정 역할에 특화된 것'을 의미

  > 인터넷에 접속했을 때 사용자 입력 및 HTML 생성을 담당하는 것은 서버에서 동작하는 소프트웨어인 '웹 서버'. 대량의 데이터를 저장해서 요청에 따라 데이터를 제공하는 것은 데이터베이스 기능을 제공하는 'DB 서버'. 컴퓨터 자체를 가리키는 경우는 '물리서버'.

  > 웹 서버나 DB 서버가 하나의 물리 서버에서 동작하는 경우도 있으며, 각각 별도의 물리 서버에서 동작하는 경우도 있음.

**논리 서버**

- 컴퓨터 내부에서 동작하는 응용프로그램을 의미
  - ex) Apache Tomcat, Webologic 등
    **물리 서버**
- 컴퓨터 자체 하드웨어를 의미

### 수직 분할형 아키텍쳐

- 분할형에서는 서버 분할 방식, 즉 역할 분담을 고려해야 함.
- 각각의 서버가 전혀 다른 작업을 하는 것인지,아니면 비슷한 작업을 하는 것인지
- 특정 서버 측면에서 봤을때 역할에 따라 '위' 또는 '아래' 계층으로 나뉘므로 **'수직형'**

#### 1. 클라이언트-서버형 아키텍쳐

- 수직 분할형의 예. 업무 애플리케이션, 미들웨어, 데이터베이스 등의 소프트웨를 '물리서버' 상에서 운영
- **클라이언트측에 전용 SW 설치가 필요**
- **업무 애플리케이션 갱시 시마다 클라이언트 측 소프트웨어도 업데이트 해야 함**
- Client/Server의 앞글자를 따서 'C/S'라고 부르기도 함
  > 주식 판매 시스템같은 경우 주가 분석은 클라이언트측에 설치된 프로그램에서 하고, 필요시 서버에 데이터를 요청하는 방식
      - 장점
        - 소수의 서버로 다수의 클라이언트 대응 가능
      - 단점
        - 클라이언트측 소프트웨어의 정기적 업데이트 필요
        - 서버에 처리가 집중될 경우 확장성에 한계
        - 이를 개선하기 위해 등장한 것이 3계층형

#### 2. 3계층형 아키텍쳐

- 클라이언트-서버형을 발전시킨 형태로, 1) 프레젠테이션 계층, 2) 애플리케이션(비즈니스) 계층, 3) 데이터 계층으로 나눈 구조

1. 프레젠테이션 계층

- 사용자 입력을 받음
- 웹 브라우저에 화면 표시

2. 애플리케이션 계층

- 사용자 요청(request)에 따라 실제 비즈니스 로직 처리

3. 데이터 계층

- 필요시 애플리케이션 계층의 요청에 따라 데이터 입출력

  > 사용자가 웹 브라우저를 통해 시스템에 접속 → 사용자가 웹 브라우저에 입력하는 화면은 프레젠테이션계층의 웹 서버에 먼저 전달 → 웹 서버는 그 요청을 뒤에 있는 애플리케이션 계층의 애플리케이션 서버(AP서버)에 전달 → AP서버는 요청을 바탕으로 판단해서 뒤에 있는 데이터 계층의 데이터베이스(DB 서버)에 데이터를 요청

- 장점

  - '클라이언트-서버형'에 비해 서버 집중 부하 개선
  - 클라이언트 단말의 정기적 업데이트 불필요
  - 모든 처리가 AP서버나 DB서버를 이용하지 않아도 되므로 '처리 반환'에 의한 서버 부하 저감
    > 이미지 파일만 읽으면 되는 경우라면 웹 서버만으로도 처리를 완료해서 결과를 반환할 수 있으므로 다른 서버에 부하를 주지 않음

- 단점
  - 구조가 클라이언트-서버 구성보다 복잡

### 수평 분할형 아키텍쳐

- 용도가 같은 서버를 늘려나가는 방식
- 용도가 같은 서버가 늘어나면 서버 한대에 부하되는 부담이 줄어서 안정성이 향상되며, 전체적인 서버 성능 향상도 실현
- 수직 분할형과 수평 분할형은 배타적인 관계가 아니며, 대부분의 시스템이 이 두가지 방식을 함께 채택

#### 1. 단순 수평 분할형 아키텍쳐

- 시스템별로 가로로 분할(수평 분할)
- 시스템이 둘로 분할됨으로써 시스템 전체 처리 성능을 두 배로 향상시킬 수 있음
- 두개의 독립된 시스템이 생성되기에 한 시스템에 장애가 발생하더라도 다른 시스템에는 전혀 영향을 주지 않아 독립성 향상
- 지리적으로 멀리 떨어진 시스템에 자주 이용됨
- 공장처럼 각 거점이 완전히 독립된 운영을 하고 있는 경우에도 적합함

  > SMS는 사용자 ID를 기준으로 서버를 분할 하는 경우가 있다.

  - 장점

    - 수평으로 서버를 늘리기 때문에 확장에 용이
    - 분할한 시스템이 독립적으로 운영되어 서로 영향을 미치지 않음

  - 단점

    - 데이터를 일원화해서 볼 수 없음
    - 애플리케이션 업데이트는 양쪽 모두 필요

      > 두 시스템이 같은 업무 애플리케이션을 이용하고 있다면, 애플리케이션 업데이트를 양쪽 시스템에 매번 실시해 주어야 함. 데이터도 각각 따로 보유하고 있어서 양쪽 데이터를 동시에 (일원화해서) 이용할 수 없음.

    - 처리량을 균등하게 분할하지 않으면 서벼별 처리량 쏠림 현상이 있음
      > 한쪽 시스템에 이용자가 몰린다면 과부하가 걸리고 다른 쪽은 놀고 있는 낭비 발생.

#### 2. 공유형 아키텍쳐

- 단순 수평 분할형과 달리 일부 계층에서 상호 접속이 이루어짐
  > 데이터 계층을 동기 처리(직렬 처리)하여 상호접속할 수 있음. 데이터에 다른 두개의 시스템이 각자 접속할 수 있음.
- 데이터 계층은 저장고의 역할도 하기 때문에 보안이 필요한 데이터가 저장되는 경우도 많음
- 데이터가 각지에 흩어져 있는것 보다 한곳에서 집중적으로 관리하는 것이 보안상이나 관리상으로 유리한 경우가 있음
- 데이터를 모아서 참조할 수 있음

장점

- 수평으로 서버를 늘리기 때문에 확장성이 향상됨
- 분할한 시스템이 서로 다른 시스템의 데이터를 참조할 수 있음

단점

- 분할한 시스템 간 독립성이 낮아짐
- 공유한 계층의 확장성이 낮아짐
